#include "gamevars.h"
#include <c64/vic.h>

//byte* const Screen     = (byte*)0xc800;
//byte* const Screen     = (byte*)0x0400;
//byte* const Color      = (byte*)0xd800;
//byte* const Sprite     = (byte*)0x0380;
//byte* const Sprite     = (byte*)0xd800;
byte* const TextFont   = (byte*)0xe800;
byte* const CharSwitch = (byte*)0xd018;
//byte* const Charset    = (byte *)0xd000;


byte* const Screen     = (byte*)0xc800;
byte* const Color      = (byte*)0xd800; // Keep this, it's hardwired
byte* const Sprite     = (byte*)0xc000; // Move sprites to the start of the bank
byte* const Charset    = (byte*)0xd000;

const struct tile		tiles[7] =
{
	{ 0, 
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }, 
    { 0, 4, 7, 10 }, //  ####
    { 4, 1, 4, 1 },    
    { 1, 4, 1, 4 }, 
    VCOL_CYAN, 
    {0, 1, 2, 3}, 
    {0, 0, 0, 0}
  },
	{ 1, 
    { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
    { 0, 4, 7, 10 },   //  ##
    { 2, 2, 2, 2 },    //  ## 
    { 2, 2, 2, 2 },    
    VCOL_YELLOW,
    {0, 1, 0, 1},
    {0, 0, 1, 1}
  },
  { 2,
    { 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0 },
    { 0, 6, 12, 18 },    //  #    #   ###    #
    { 3, 2, 3, 2 },      // ###   ##   #    ##
    { 2, 3, 2, 3 },      //       #          #
    VCOL_PURPLE,
    {1, 0, 1, 2},
    {0, 1, 1, 1}
  },
  { 3,
    { 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1 },
    { 0, 6, 12, 18 },     //  ##   #     ##   #
    { 3, 2, 3, 2 },       // ##    ##   ##    ##
    { 2, 3, 2, 3 },       //        #          #
    VCOL_GREEN,
    {1, 2, 0, 1},
    {0, 0, 1, 1}
  },
  { 4,
    { 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0 },
    { 0, 6, 12, 18 },     // ##
    { 3, 2, 3, 2 },       //  ##
    { 2, 3, 2, 3 },
    VCOL_RED,
    {0, 1, 1, 2},
    {0, 0, 1, 1}
  },
  { 5,
    { 1, 0, 0, 1, 1, 1, 
      1, 1, 1, 0, 1, 0, 
      1, 1, 1, 0, 0, 1,
      0, 1, 0, 1, 1, 1 },
    { 0, 6, 12, 18 },    // #    ##  ###    #
    { 3, 2, 3, 2 },      // ###  #     #    #
    { 2, 3, 2, 3 },      //      #         ##
    VCOL_BLUE, 
    {0, 0, 1, 2}, 
    {0, 1, 1, 1}
  },
	{ 6,
    { 0, 0, 1, 1, 1, 1, 
      1, 0, 1, 0, 1, 1,
      1, 1, 1, 1, 0, 0,
      1, 1, 0, 1, 0, 1 },
    { 0, 6, 12, 18 },   //   #  #    ###  ##
    { 3, 2, 3, 2 },     // ###  #    #     #
    { 2, 3, 2, 3 },     //      ##         #
    VCOL_ORANGE,
    {3, 0, 1, 2},
    {0, 1, 1, 1}
  },
	
};

//                          01234567890123456789012345678901234567890
const char StatusText[] = s" Score: 000000  Lines: 000000  Level: 00";
//const char StatusText[] = " SCORE: 000000  LINES: 000000   LEVEL: 0 ";

const unsigned char level_y_inc[10] = {4, 6, 9, 12, 15, 18, 21, 24, 27, 30};

struct Game TheGame = {0};

const Vector2 KICK_DATA_GENERIC[8][5] = {
  {{0, 0}, {-1, 0}, {-1, 1}, {0,-2}, {-1,-2}}, // 0 -> 1
  {{0, 0}, { 1, 0}, { 1,-1}, {0, 2}, { 1, 2}}, // 1 -> 0
  {{0, 0}, { 1, 0}, { 1,-1}, {0, 2}, { 1, 2}}, // 1 -> 2
  {{0, 0}, {-1, 0}, {-1, 1}, {0,-2}, {-1,-2}}, // 2 -> 1
  {{0, 0}, { 1, 0}, { 1, 1}, {0,-2}, { 1,-2}}, // 2 -> 3
  {{0, 0}, {-1, 0}, {-1,-1}, {0, 2}, {-1, 2}}, // 3 -> 2
  {{0, 0}, {-1, 0}, {-1,-1}, {0, 2}, {-1, 2}}, // 3 -> 0
  {{0, 0}, { 1, 0}, { 1, 1}, {0,-2}, { 1,-2}}  // 0 -> 3
};

// Tests for I piece
const Vector2 KICK_DATA_I[8][5] = {
  {{0, 0}, {-2, 0}, { 1, 0}, {-2,-1}, { 1, 2}}, // 0 -> 1
  {{0, 0}, { 2, 0}, {-1, 0}, { 2, 1}, {-1,-2}}, // 1 -> 0
  {{0, 0}, {-1, 0}, { 2, 0}, {-1, 2}, { 2,-1}}, // 1 -> 2
  {{0, 0}, { 1, 0}, {-2, 0}, { 1,-2}, {-2, 1}}, // 2 -> 1
  {{0, 0}, { 2, 0}, {-1, 0}, { 2, 1}, {-1,-2}}, // 2 -> 3
  {{0, 0}, {-2, 0}, { 1, 0}, {-2,-1}, { 1, 2}}, // 3 -> 2
  {{0, 0}, { 1, 0}, {-2, 0}, { 1,-2}, {-2, 1}}, // 3 -> 0
  {{0, 0}, {-1, 0}, { 2, 0}, {-1, 2}, { 2,-1}}  // 0 -> 3
};

const byte SpriteImage[64] = {
	0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b01010101, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000,
  0b00000000, 0b00000000, 0b00000000
};